<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0">
    <title>Joe Binns</title>
    <link rel="stylesheet" href="styles.css">
    <link id="shortcuticon" rel="shortcut icon" href="images/globe_box_optimised.svg">
</head>
<body>
    <div class="upperleft fade-in-out" style="animation-iteration-count:infinite;padding:4px;">
        <p style="display:inline">
            <a id="notification_hyper" class="greenhyperlink" href="mailto:joebinns.95@gmail.com" target="_blank">
                <img id="notification" style="display:inline;" src="images/circle_green_optimised.svg" alt="Green Circle" width="12" height="12"> Available for work
            </a>
        </p>
    </div>
    <div class="center">
        <h1>
            Joe Binns
        </h1>
        <p>
            <a>
                <span class="line">Game Programming </span>
            </a>
            <span class = "line">
                <a class="hyperlink" href="https://futuregames.se/" target="_blank">@ Futuregames Stockholm</a><a>,</a>
            </span>
            <br>
            <a>
                <span class="line">Theoretical Physics / </span>
                <span class="line">Machine Learning </span>
            </a>
            <span class = "line">
                <a class="hyperlink" href="https://www.atp.lu.se/" target="_blank">@ Lund University</a><a>.</a>
            </span>
        </p>
        <p>
            <span class = "line">
                <a class="hyperlink" href="documents/cv/cv_joe_binns_2022_07_11.pdf" target="_blank">Curriculum Vitae</a><a>,</a>
            </span>
            <br>
            <span class = "line">
                <a>Work Samples: </a><a class="hyperlink" href="documents/work_sample/ws_gp_joe_binns.pdf" target="_blank">Game Programming</a><a>,</a>
            </span>
            <br>
            <span class = "line">
                <a>Publications: </a><a class="hyperlink" href="http://lup.lub.lu.se/student-papers/record/9088789" target="_blank">Combined Regularisation Techniques for Artificial Neural Networks</a><a>,</a>
            </span>
            <br>
            <span class = "line">
                <a class="hyperlink" href="documents/letters_of_recommendation/professional_letters_of_recommendation.pdf" target="_blank">Letters of Recommendation</a><a>.</a>
            </span>
        </p>
        <p>
            <a class="hyperimage" href="https://github.com/joebinns" target="_blank"><img id="github" src="images/github_box_optimised.svg" alt="GitHub" width="20" height="20"></a>
            <a> </a>
            <a class="hyperimage" href="mailto:joebinns.95@gmail.com" target="_blank"><img id="mail" src="images/mail_box_optimised.svg" alt="email" width="20" height="20"></a>
            <a> </a>
            <!--<a class="hyperimage" href="https://twitter.com/joebinns95" target="_blank"><img id="twitter"src="images/twitter_box_optimised.svg" alt="Twitter" width="20" height="20"></a>-->
            <a class="hyperimage" href="https://joebinns.itch.io/" target="_blank"><img id="itchdotio" src="images/itchdotio_box_optimised.svg" alt="itch.io" width="20" height="20"></a>
            <a> </a>
            <a class="hyperimage" href="https://www.youtube.com/channel/UCw7E9coBaTrn773ZCHAzc4w" target="_blank"><img id="youtube" src="images/youtube_box._optimised.svg" alt="YouTube" width="20" height="20"></a>
            <a> </a>
            <a class="hyperimage" href="https://www.linkedin.com/in/joe-binns/" target="_blank"><img id="linkedin" src="images/linkedin_box_optimised.svg" alt="LinkedIn" width="20" height="20"></a>
        </p>
    </div>  
    <script>
        const userPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        if(userPrefersDark){
            document.getElementById("shortcuticon").href="images/globe_box_optimised_white.svg";
            document.getElementById("github").src="images/github_box_optimised_white.svg";
            document.getElementById("mail").src="images/mail_box_optimised_white.svg";
            //document.getElementById("twitter").src="images/twitter_box_optimised_white.svg";
            document.getElementById("itchdotio").src="images/itchdotio_box_optimised_white.svg";
            document.getElementById("youtube").src="images/youtube_box_optimised_white.svg";
            document.getElementById("linkedin").src="images/linkedin_box_optimised_white.svg";
        }
    </script>
    <script type="importmap">
        {
            "imports":
            {
                "three": "https://unpkg.com/three/build/three.module.js",
                "gltfloader": "https://unpkg.com/three/examples/jsm/loaders/GLTFLoader.js",
                "effectcomposer": "https://unpkg.com/three/examples/jsm/postprocessing/EffectComposer.js",
                "renderpass": "https://unpkg.com/three/examples/jsm/postprocessing/RenderPass.js",
                "shaderpass": "https://unpkg.com/three/examples/jsm/postprocessing/ShaderPass.js",
                "fxaashader": "https://unpkg.com/three/examples/jsm/shaders/FXAAShader.js"
            }
        }
    </script>
    <script type="module">
        class WebGL
        {
            static isWebGLAvailable()
            {
                try
                {
                    const canvas = document.createElement( 'canvas' );
                    return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );
                }
                catch (e)
                {
                    return false;
                }

            }
        }
        // Three.js
        import * as THREE from 'three';
        // glTF model loader
        import {GLTFLoader} from 'gltfloader';
        // Custom outline pre-requisites (?)
        import { EffectComposer } from "effectcomposer";
        import { RenderPass } from "renderpass";
        import { ShaderPass } from "shaderpass";
        import { FXAAShader } from "fxaashader";
        // Custom outline
        import { CustomOutlinePass } from "./CustomOutlinePass.js";

        // Init scene
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.setPixelRatio( window.devicePixelRatio ); // Adjust pixel ratio (to improve mobile quality)
        document.body.appendChild( renderer.domElement );

        var mouse = new THREE.Vector2();

        // White directional light.
        //const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        //directionalLight.position.set(1,1,1); // origin position of the lighting (to 0,0,0 target default).
        //scene.add(directionalLight);

        camera.position.z = 7.5;

        const renderTarget = new THREE.WebGLRenderTarget(
        window.innerWidth,
        window.innerHeight
        );

        // Regular scene render pass. This is step 1 in the pipeline described in CustomOutlinePass.js
        const composer = new EffectComposer(renderer, renderTarget);
        //const pass = new RenderPass(scene, camera);
        //composer.addPass(pass);

        // Outline pass.
        const customOutline = new CustomOutlinePass(
        new THREE.Vector2(window.innerWidth, window.innerHeight),
        scene,
        camera
        );
        composer.addPass(customOutline);

        // Antialias pass.
        const effectFXAA = new ShaderPass(FXAAShader);
        effectFXAA.uniforms["resolution"].value.set(
        1 / window.innerWidth,
        1 / window.innerHeight
        );
        composer.addPass(effectFXAA);


        // Import models
        const loader = new GLTFLoader();

        var spaceStation5;
        var orion;

        loader.load('scenes/space_station_5/space_station_5.glb',
        function(gltf)
        {
            spaceStation5 = gltf.scene;

            const group = new THREE.Group();
            group.add(spaceStation5);

            group.position.set(10, -5, -2.5);
            group.rotation.set(0, 12.5*3.14/180, -26.5*3.14/180);

            spaceStation5.traverse(node => node.applyOutline = true);

            scene.add(group);

            //scene.add(spaceStation5);
        },
        undefined,
        function(error)
        {
            console.error(error);
        }
        );

        loader.load('scenes/orion/orion.glb',
        function(gltf)
        {
            orion = gltf.scene;

            const group = new THREE.Group();
            group.add(orion);

            group.position.set(-3.75, 1.875, 0.9375);
            group.rotation.set(0, 12.5*3.14/180, -26.5*3.14/180);

            orion.traverse(node => node.applyOutline = true);

            scene.add(group);
        },
        undefined,
        function(error)
        {
            console.error(error);
        }
        );

        
        // Declare Custom Outline uniforms
        // Change outline colour
        const uniforms = customOutline.fsQuad.material.uniforms;

        var startOutlineColor;
        var targetOutlineColor;
        let currentColor = new THREE.Color();
        if(userPrefersDark){
            startOutlineColor = new THREE.Color(0x000000); // black
            uniforms.outlineColor.value.set(startOutlineColor); 
            targetOutlineColor = new THREE.Color(0xffffff); // white
        }
        else
        {
            startOutlineColor = new THREE.Color(0xffffff); // white
            uniforms.outlineColor.value.set(new THREE.Color(0xffffff));
            targetOutlineColor = new THREE.Color(0x000000); // black
        }
        currentColor = startOutlineColor;

        //uniforms.multiplierParameters.value.z = 2.5; //4 scalar values packed in one uniform: depth multiplier, depth bias, and same for normals.
        uniforms.multiplierParameters.value.x = 0.25;
        uniforms.multiplierParameters.value.y = 10;
        uniforms.multiplierParameters.value.z = 1;
        uniforms.multiplierParameters.value.w = 0;

        // Render loop
        var t = 0;
        var prevTime = performance.now();
        var orionShouldMove = false;
        var orionSpeed = 0;
        //var startOrionSpeed = 0;
        //var targetOrionSpeed = 1;
        function update()
        {
            t += 0.0005;

            requestAnimationFrame(update);

            if (spaceStation5) 
            {
                spaceStation5.rotation.x += 0.001;
            }
            if (orion) 
            {
                orion.rotation.x += 0.001;
            }

            camera.rotation.y = THREE.MathUtils.lerp(camera.rotation.y, -(( mouse.x - (window.innerWidth / 2) ) * Math.PI) / 30, 0.1);
            camera.rotation.x = THREE.MathUtils.lerp(camera.rotation.x, mouse.y * Math.PI / 30, 0.1);
      
            //camera.rotation.y = THREE.MathUtils.clamp(camera.rotation.y, -1 * THREE.MathUtils.degToRad(90), 1 * THREE.MathUtils.degToRad(90));
            //camera.rotation.x = THREE.MathUtils.clamp(camera.rotation.x, -1 * THREE.MathUtils.degToRad(15), 1 * THREE.MathUtils.degToRad(15));

            if (t < 1)
            {
                //uniforms.outlineColor.value.set(THREE.MathUtils.lerp(uniforms.outlineColor.value, targetOutlineColor, t));
                uniforms.outlineColor.value.set(currentColor.lerpColors(startOutlineColor, targetOutlineColor, t));
            }

            
            if (orion) 
            {
                /*
                orionSpeed = THREE.MathUtils.lerp(startOrionSpeed, targetOrionSpeed, Math.abs(0.1 + orionSpeed - startOrionSpeed));
                orion.position.x += orionSpeed * 0.1;
                */

                //lets make sure we can move camera smoothly based on user's performance. 
                var time = performance.now();
                var deltaTime = ( time - prevTime ) / 1000;
                
                //reset z velocity to be 0 always. But override it if user presses up or w. See next line...      
                orionSpeed -= orionSpeed * 1.0 * deltaTime;
                //if the user pressed 'up' or 'w', set velocity.z to a value > 0.  
                if ( orionShouldMove ) orionSpeed += 5.0 * deltaTime;
                
                //pass velocity as an argument to translateZ and call it on camera.
                orion.position.x += ( orionSpeed * deltaTime );
                
                prevTime = time;
            }
    

            composer.render();
        }

        function onWindowResize()
        {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
            effectFXAA.setSize(window.innerWidth, window.innerHeight);
            customOutline.setSize(window.innerWidth, window.innerHeight);
        }

        function onDocumentMouseMove(event)
        {
            event.preventDefault();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        function onDocumentKeyDown(event) {
            var keyCode = event.which;
            orionShouldMove = true;
            //startOrionSpeed = 0;
            //targetOrionSpeed = 1;
            //orion.position.x += 0.01;
        };
        
        function onDocumentKeyUp(event) {
            var keyCode = event.which;
            orionShouldMove = false;
            //startOrionSpeed = 1;
            //targetOrionSpeed = 0;
        };
        

        if (WebGL.isWebGLAvailable())
        {
            // Initiate function or other initializations here
            update();
            document.addEventListener("mousemove", onDocumentMouseMove, false);
            document.addEventListener("keydown", onDocumentKeyDown, false);
            document.addEventListener("keyup", onDocumentKeyUp, false);
            window.addEventListener("resize", onWindowResize, false);
        }

        //if(!userPrefersDark){
        //    scene.background = new THREE.Color(0xff0000);//(0x000000);
        //}
    </script>
</body>
</html>
